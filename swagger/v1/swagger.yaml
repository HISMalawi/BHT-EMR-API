---
openapi: 3.0.1
info:
  title: EMR API V1 DOCS
  version: v1
paths:
  "/api/v1/next_appointment":
    get:
      summary: list appointments
      tags:
      - Appointments
      description: Appointments Endpoints
      security:
      - api_key: []
      parameters:
      - name: patient_id
        in: query
        example: 1
        description: Patient ID
        required: true
        default: 1
        schema:
          type: integer
      - name: program_id
        in: query
        example: 1
        description: Program ID
        required: true
        default: 1
        schema:
          type: integer
      - name: date
        in: query
        format: date
        example: '2020-01-01'
        description: Date in YYYY-MM-DD format
        required: true
        schema:
          type: string
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  appointment_date:
                    type: string
                    format: date
                required:
                - appointment_date
        '404':
          description: not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: string
                required:
                - errors
  "/api/v1/art_data_cleaning_tools":
    get:
      summary: Retrieve patients with data problems
      tags:
      - Cleaning Tools
      description: This shows the patients with data problems
      security:
      - api_key: []
      parameters:
      - name: params
        in: query
        schema:
          "$ref": "#/components/schemas/data_cleaning_request"
      responses:
        '200':
          description: You can cross check the different responses in the swagger
            documentation
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/multiple_identifiers"
  "/api/v1/void_multiple_identifiers":
    delete:
      summary: Void multiple filing numbers
      tags:
      - Cleaning Tools
      description: This voids multiple filing numbers
      security:
      - api_key: []
      parameters: []
      responses:
        '204':
          description: Returns no content
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                identifiers:
                  "$ref": "#/components/schemas/void_multiple_identifiers"
                reason:
                  type: string
              required:
              - identifiers
              - reason
  "/api/v1/programs/1/reports/clinic_tx_rtt":
    get:
      summary: Retrieve CLINIC TX RTT report
      tags:
      - Clinic Reports
      description: This shows CLINIC TX RTT report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: CLINIC TX RTT Report found
          content:
            application/json:
              schema:
                type: object
                properties:
                  age_group:
                    type: object
                    properties:
                      gender:
                        type: array
                        items:
                          type: object
                          properties:
                            patient_id:
                              type: integer
                            months:
                              type: integer
        '404':
          description: CLINIC TX RTT Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/programs/1/reports/tpt_outcome":
    get:
      summary: Retrieve TPT OUTCOME report
      tags:
      - Clinic Reports
      description: This shows TPT OUTCOME report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: TPT OUTCOME Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    age_group:
                      type: string
                    tpt_type:
                      type: string
                    started_tpt:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    completed_tpt:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    not_completed_tpt:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    died:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    defaulted:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    transferred_out:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    confirmed_tb:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    pregnant:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    stopped:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    breast_feeding:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    skin_rash:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    peripheral_neuropathy:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    yellow_eyes:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    nausea:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
                    dizziness:
                      type: array
                      items:
                        type: object
                        properties:
                          patient_id:
                            type: integer
                          gender:
                            type: string
        '404':
          description: TPT OUTCOME Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  api/v1/programs/1/reports/lims_electronic_results:
    get:
      summary: Retrieve LIMS ELECTRONIC RESULTS report
      tags:
      - Clinic Reports
      description: This shows LIMS ELECTRONIC RESULTS report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: LIMS ELECTRONIC RESULTS Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/lims_electronic_result"
  "/api/v1/programs/1/reports/vl_collection":
    get:
      summary: Retrieve VL Collection report
      tags:
      - Clinic Reports
      description: This shows Viral Load Collection report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: VL Collection Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/vl_collection"
        '404':
          description: VL Collection Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/programs/1/reports/discrepancy_report":
    get:
      summary: Retrieve Discrepancy report
      tags:
      - Clinic Reports
      description: This shows Discrepancy report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Discrepancy Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/discrepancy_report"
  "/api/v1/programs/1/reports/hypertension_report":
    get:
      summary: Retrieve Hypertension report
      tags:
      - Clinic Reports
      description: This shows Hypertension report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Hypertension Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/hypertension_report"
  "/api/v1/dashboard_stats":
    get:
      summary: Retrieve CLINIC Dashboard report
      tags:
      - Clinic Reports
      description: This shows CLINIC TDashboard report
      security:
      - api_key: []
      parameters:
      - name: date
        in: query
        schema:
          type: string
      - name: program_id
        in: query
        schema:
          type: string
      responses:
        '200':
          description: CLINIC Dashboard Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/aetc_dashboard"
        '404':
          description: CLINIC Dashboard Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/programs/30/reports/diagnosis_report":
    get:
      summary: Retrieve AETC Diagnosis report
      tags:
      - Clinic Reports
      description: This shows AETC Diagnosis report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      - name: age_group
        in: query
        schema:
          type: string
      responses:
        '200':
          description: AETC Diagnosis Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/aetc_diagnosis"
  "/api/v1/programs/30/reports/diagnosis_specific_report":
    get:
      summary: Retrieve AETC Diagnosis Specific report
      tags:
      - Clinic Reports
      description: This shows AETC Diagnosis Specific report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      - name: diagnosis
        in: query
        schema:
          type: string
      responses:
        '200':
          description: AETC Diagnosis Specific Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/aetc_specific_diagnosis"
  "/api/v1/programs/30/reports/DISAGGREGATED_DIAGNOSIS":
    get:
      summary: Retrieve AETC DISAGGREGATED Diagnosis report
      tags:
      - Clinic Reports
      description: This shows AETC DISAGGREGATED Diagnosis report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: AETC DISAGGREGATED Diagnosis Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/aetc_dissag_diagnosis"
  "/api/v1/programs/30/reports/REFERRAL_REPORT":
    get:
      summary: Retrieve AETC Referral report
      tags:
      - Clinic Reports
      description: This shows AETC Referral report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: AETC Referral Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/aetc_referral_report"
  "/api/v1/programs/30/reports/TOTAL_REGISTERED":
    get:
      summary: Retrieve AETC TOTAL REGISTERED report
      tags:
      - Clinic Reports
      description: This shows AETC TOTAL REGISTERED report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      - name: age_group
        in: query
        schema:
          type: string
      responses:
        '200':
          description: AETC TOTAL REGISTERED Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/aetc_total_registered_report"
  "/api/v1/programs/31/reports/dashboard":
    get:
      summary: Retrieve Dashboard report
      tags:
      - Clinic Reports
      description: This shows Spine Module Dashboard report
      security:
      - api_key: []
      parameters:
      - name: date
        in: query
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Dashboard Report found
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/spine_dashboard"
  "/api/v1/radiology_set":
    get:
      summary: Retrieve all radiology sets
      tags:
      - Concept Sets
      description: This shows all radiology examination sets
      security:
      - api_key: []
      parameters:
      - name: id
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Radiology Sets found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    concept_id:
                      type: integer
                    name:
                      type: string
  "/api/v1/concept_sets/{id}":
    get:
      summary: Retrieve concept set by id
      tags:
      - Concept Sets
      description: This shows concept set by id
      security:
      - api_key: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Concept Set found
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
        '404':
          description: Concept Set not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/data_cleaning_supervisions":
    get:
      summary: list data_cleaning_supervisions
      tags:
      - Data Cleaning Supervision Endpoints
      description: List data cleaning supervisions
      security:
      - api_key: []
      parameters:
      - name: paginate
        in: query
        description: paginate results
        schema:
          type: boolean
      - name: page
        in: query
        description: page number
        schema:
          type: integer
      - name: page_size
        in: query
        description: per page count
        schema:
          type: integer
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/data_cleaning_supervision"
    post:
      summary: create data_cleaning_supervision
      tags:
      - Data Cleaning Supervision Endpoints
      description: Create data cleaning supervision
      security:
      - api_key: []
      parameters: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/data_cleaning_supervision"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                data_cleaning_datetime:
                  type: string
                  format: date-time
                comments:
                  type: string
                supervisors:
                  type: string
                  description: Supervisors separated by ;
  "/api/v1/data_cleaning_supervisions/{id}":
    parameters:
    - name: id
      in: path
      description: id
      required: true
      schema:
        type: string
    get:
      summary: show data_cleaning_supervision
      tags:
      - Data Cleaning Supervision Endpoints
      description: Show data cleaning supervision
      security:
      - api_key: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/data_cleaning_supervision"
    put:
      summary: update data_cleaning_supervision
      tags:
      - Data Cleaning Supervision Endpoints
      description: Update data cleaning supervision
      security:
      - api_key: []
      parameters: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/data_cleaning_supervision"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                data_cleaning_datetime:
                  type: string
                  format: date-time
                comments:
                  type: string
                supervisors:
                  type: string
                  description: Supervisors separated by ;
    delete:
      summary: delete data_cleaning_supervision
      tags:
      - Data Cleaning Supervision Endpoints
      description: Delete data cleaning supervision
      security:
      - api_key: []
      parameters:
      - name: reason
        in: query
        description: reason for deletion
        schema:
          type: string
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
  "/api/v1/search/identifiers/multiples":
    get:
      summary: Retrieve patients with data problems
      tags:
      - Data Management Tools
      description: This shows the patients with data problems
      security:
      - api_key: []
      parameters:
      - name: type_id
        in: query
        schema:
          type: integer
      responses:
        '200':
          description: You can cross check the different responses in the swagger
            documentation
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/multiple_identifiers"
  "/api/v1/arv_drugs":
    get:
      summary: Returns a list of ARV drugs
      tags:
      - Drugs
      description: This returns a list of ARV drugs
      security:
      - api_key: []
      responses:
        '200':
          description: ARV Drugs returned
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    drug_id:
                      type: integer
                    concept_id:
                      type: integer
                    name:
                      type: string
                    dosage_form:
                      type: integer
                    dosage_strength:
                      type: float
                    maximum_daily_dose:
                      type: float
                    minimum_daily_dose:
                      type: float
                    route:
                      type: integer
                    units:
                      type: string
                    creator:
                      type: integer
                    date_created:
                      type: string
                    retired:
                      type: boolean
                    retired_by:
                      type: integer
                    date_retired:
                      type: string
                    retire_reason:
                      type: string
                    uuid:
                      type: string
                    alternative_names:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                          short_name:
                            type: string
                          created_at:
                            type: string
                          updated_at:
                            type: string
                    barcodes:
                      type: array
                      items:
                        type: object
                        properties:
                          drug_order_barcode_id:
                            type: integer
                          drug_id:
                            type: integer
                          tabs:
                            type: integer
                          created_at:
                            type: string
                          updated_at:
                            type: string
  "/api/v1/hts_reports":
    get:
      summary: Returns HTS Reports
      tags:
      - HTS Reports
      description: This returns a report based on the name of the report. For specific
        response structure, do checkout the schema sections
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      - name: name
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Example for HTS RECENT COMMUNITY
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/hts_recent_community"
        '404':
          description: Example if the report doesn't exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: string
        '400':
          description: Example start date is greater than end date
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: string
  "/api/v1/internal_sections":
    get:
      summary: Retrieve all internal sections
      tags:
      - Internal Sections
      description: This shows all internal sections
      security:
      - api_key: []
      responses:
        '200':
          description: Internal Sections found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    created_at:
                      type: string
                    updated_at:
                      type: string
        '404':
          description: Internal Sections not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/internal_sections/{id}":
    get:
      summary: Retrieve internal section by id
      tags:
      - Internal Sections
      description: This shows internal section by id
      security:
      - api_key: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Internal Section found
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
        '404':
          description: Internal Section not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
    put:
      summary: Update internal section
      tags:
      - Internal Sections
      security:
      - api_key: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Internal Section updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
        '422':
          description: Internal Section not updated
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
              required:
              - name
    delete:
      summary: Remove internal section
      tags:
      - Internal Sections
      security:
      - api_key: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Internal Section removed
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
        '422':
          description: Internal Section not removed
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                void_reason:
                  type: string
              required:
              - void_reason
  "/api/v1/internal_sections/":
    post:
      summary: Create internal section
      tags:
      - Internal Sections
      security:
      - api_key: []
      parameters: []
      responses:
        '201':
          description: Internal Section created
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
        '422':
          description: Internal Section not created
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
              required:
              - name
  "/api/v1/notifications/clear/{id}":
    parameters:
    - name: id
      in: path
      description: id
      required: true
      schema:
        type: string
    put:
      summary: clear notification
      tags:
      - Notification Endpoints
      description: Clear notification
      security:
      - api_key: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
  "/api/v1/notifications":
    get:
      summary: list notifications
      tags:
      - Notification Endpoints
      description: List Uncleared notifications
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/notification_alert"
  "/api/v1/notifications/{id}":
    parameters:
    - name: id
      in: path
      description: id
      required: true
      schema:
        type: string
    put:
      summary: update notification
      tags:
      - Notification Endpoints
      description: Update notification
      security:
      - api_key: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
  "/api/v1/observations":
    post:
      summary: Create new observation
      tags:
      - Observation Controller
      security:
      - api_key: []
      parameters: []
      responses:
        '201':
          description: Observation created
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                encounter_id:
                  type: integer
                observations:
                  type: array
                  items:
                    type: object
                    properties:
                      concept_id:
                        type: integer
                      obs_datetime:
                        type: string
                      value_coded:
                        type: integer
                      value_text:
                        type: string
                      value_numeric:
                        type: number
                      value_datetime:
                        type: string
                      value_drug:
                        type: integer
                      value_boolean:
                        type: boolean
                      child:
                        type: array
                        items:
                          type: object
                          properties:
                            concept_id:
                              type: integer
                            obs_datetime:
                              type: string
                            value_coded:
                              type: integer
                            value_text:
                              type: string
                            value_numeric:
                              type: number
                            value_datetime:
                              type: string
                            value_drug:
                              type: integer
                            value_boolean:
                              type: boolean
              required:
              - concept_id
  "/api/v1/orders/radiology":
    post:
      summary: Adds a Radiology Order
      tags:
      - Orders
      description: This adds a radiology order to the system
      security:
      - api_key: []
      parameters: []
      responses:
        '201':
          description: Radiology Order Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  order_id:
                    type: integer
                  accession_number:
                    type: string
                  created_at:
                    type: string
                  updated_at:
                    type: string
        '422':
          description: Radiology Order not created
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
        '404':
          description: Encounter not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                encounter_id:
                  type: integer
                concept_id:
                  type: integer
                instructions:
                  type: string
                  nullable: true
                start_date:
                  type: string
                  nullable: true
                orderer:
                  type: integer
                  nullable: true
                accession_number:
                  type: string
                  nullable: true
                provider:
                  type: integer
                  nullable: true
              required:
              - encounter_id
              - concept_id
    get:
      summary: Print the examination number
      tags:
      - Orders
      description: This prints a radiology examination number
      security:
      - api_key: []
      parameters:
      - name: params
        in: query
        schema:
          type: object
          properties:
            accession_number:
              type: string
            order_id:
              type: integer
      responses:
        '200':
          description: File printed successfully
          content:
            application/label:
              schema:
                type: file
                properties:
                  filename:
                    type: string
        '404':
          description: Examination not found
          content:
            application/label:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/patients/{patient_id}/labels/national_health_id":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: print_national_health_id_label patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/labels/filing_number":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: print_filing_number patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/labels/print_tb_number":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: print_tb_number patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/labels/print_tb_lab_order_summary":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: print_tb_lab_order_summary patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/visits":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: visits patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/visit":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: visit patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/tpt_status":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: tpt_status patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/drugs_received":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: drugs_received patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/last_drugs_received":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: last_drugs_received patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/drugs_orders_by_program":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: drugs_orders_by_program patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/recent_lab_orders":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: recent_lab_orders patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/current_bp_drugs":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: current_bp_drugs patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/last_bp_drugs_dispensation":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: last_bp_drugs patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/median_weight_height":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: find_median_weight_and_height patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/bp_trail":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: bp_readings_trail patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/eligible_for_htn_screening":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: eligible_for_htn_screening patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/filing_number":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    post:
      summary: assign_filing_number patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/past_filing_numbers":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: filing_number_history patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/assign_tb_number":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    get:
      summary: assign_tb_number patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/npid":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    post:
      summary: assign_npid patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/remaining_bp_drugs":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    post:
      summary: remaining_bp_drugs patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{patient_id}/update_or_create_htn_state":
    parameters:
    - name: patient_id
      in: path
      description: patient_id
      required: true
      schema:
        type: string
    post:
      summary: update_or_create_htn_state patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients":
    get:
      summary: list patients
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
    post:
      summary: create patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/patients/{id}":
    parameters:
    - name: id
      in: path
      description: id
      required: true
      schema:
        type: string
    get:
      summary: show patient
      tags:
      - Patients
      description: Patient related endpoints
      security:
      - api_key: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/patient"
    put:
      summary: update patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
    delete:
      summary: delete patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/search/patients/by_npid":
    get:
      summary: search_by_npid patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/search/patients/by_identifier":
    get:
      summary: search_by_identifier patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/search/patients":
    get:
      summary: search_by_name_and_gender patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/archiving_candidates":
    get:
      summary: find_archiving_candidates patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/last_drugs_pill_count":
    get:
      summary: last_drugs_pill_count patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/tpt_prescription_count":
    get:
      summary: tpt_prescription_count patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  "/api/v1/last_cxca_screening_details":
    get:
      summary: last_cxca_screening_details patient
      tags:
      - Patients
      description: Patient related endpoints
      responses:
        '200':
          description: successful
  api/v1/programs/1/reports/tx_tb:
    get:
      summary: Retrieve TX_TB REPORT
      tags:
      - Pepfar Reports
      description: This shows TX_TB report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: TX_TB Report found
          content:
            application/json:
              schema:
                type: object
                properties:
                  age_group:
                    gender:
                      type: object
                      properties:
                        tx_curr:
                          type: array
                          items:
                            type: integer
                        sceen_pos_new:
                          type: array
                          items:
                            type: integer
                        sceen_neg_new:
                          type: array
                          items:
                            type: integer
                        started_tb_new:
                          type: array
                          items:
                            type: integer
                        sceen_pos_prev:
                          type: array
                          items:
                            type: integer
                        sceen_neg_prev:
                          type: array
                          items:
                            type: integer
                        started_tb_prev:
                          type: array
                          items:
                            type: integer
        '404':
          description: TX_TB Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  api/v1/programs/1/reports/sc_curr:
    get:
      summary: Retrieve SC CURR REPORT
      tags:
      - Pepfar Reports
      description: This shows ARV Bottles available
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: SC_CURR Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/sc_curr"
        '404':
          description: SC_CURR Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/programs/12/reports/pmtct_stat_art":
    get:
      summary: Retrieve PMTCT STAT ART
      tags:
      - Pepfar Reports
      description: This shows PMTCT STAT ART report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: PMTCT STAT ART Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    age_group:
                      type: string
                    known_positive:
                      type: array
                      items:
                        type: integer
                    newly_tested_positives:
                      type: array
                      items:
                        type: integer
                    new_negatives:
                      type: array
                      items:
                        type: integer
                    recent_negatives:
                      type: array
                      items:
                        type: integer
                    not_done:
                      type: array
                      items:
                        type: integer
                    new_on_art:
                      type: array
                      items:
                        type: integer
                    already_on_art:
                      type: array
                      items:
                        type: integer
        '404':
          description: PMTCT STAT ART Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/programs/1/reports/viral_load_coverage":
    get:
      summary: Retrieve VL Coverage
      tags:
      - Pepfar Reports
      description: This shows VL Coverage report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: VL Coverage Report found
          content:
            application/json:
              schema:
                type: object
                properties:
                  age_group:
                    type: object
                    properties:
                      due_for_vl:
                        type: array
                        items:
                          type: object
                          properties:
                            age_group:
                              type: string
                            patient_id:
                              type: integer
                            arv_number:
                              type: string
                            birthdate:
                              type: string
                            gender:
                              type: string
                            due_status:
                              type: integer
                      drawn:
                        type: object
                        properties:
                          routine:
                            type: array
                            items:
                              type: object
                              properties:
                                age_group:
                                  type: string
                                patient_id:
                                  type: integer
                                arv_number:
                                  type: string
                                birthdate:
                                  type: string
                                order_date:
                                  type: string
                                sample_drawn_date:
                                  type: string
                                reason_for_test:
                                  type: string
                                result_modifier:
                                  type: string
                                result_value:
                                  type: string
                          targeted:
                            type: array
                            items:
                              type: object
                              properties:
                                age_group:
                                  type: string
                                patient_id:
                                  type: integer
                                arv_number:
                                  type: string
                                birthdate:
                                  type: string
                                order_date:
                                  type: string
                                sample_drawn_date:
                                  type: string
                                reason_for_test:
                                  type: string
                                result_modifier:
                                  type: string
                                result_value:
                                  type: string
                      high_vl:
                        type: object
                        properties:
                          type: object
                          properties:
                            routine:
                              type: array
                              items:
                                type: object
                                properties:
                                  age_group:
                                    type: string
                                  patient_id:
                                    type: integer
                                  arv_number:
                                    type: string
                                  birthdate:
                                    type: string
                                  order_date:
                                    type: string
                                  sample_drawn_date:
                                    type: string
                                  reason_for_test:
                                    type: string
                                  result_modifier:
                                    type: string
                                  result_value:
                                    type: string
                            targeted:
                              type: array
                              items:
                                type: object
                                properties:
                                  age_group:
                                    type: string
                                  patient_id:
                                    type: integer
                                  arv_number:
                                    type: string
                                  birthdate:
                                    type: string
                                  order_date:
                                    type: string
                                  sample_drawn_date:
                                    type: string
                                  reason_for_test:
                                    type: string
                                  result_modifier:
                                    type: string
                                  result_value:
                                    type: string
                      low_vl:
                        type: object
                        properties:
                          type: object
                          properties:
                            routine:
                              type: array
                              items:
                                type: object
                                properties:
                                  age_group:
                                    type: string
                                  patient_id:
                                    type: integer
                                  arv_number:
                                    type: string
                                  birthdate:
                                    type: string
                                  order_date:
                                    type: string
                                  sample_drawn_date:
                                    type: string
                                  reason_for_test:
                                    type: string
                                  result_modifier:
                                    type: string
                                  result_value:
                                    type: string
                            targeted:
                              type: array
                              items:
                                type: object
                                properties:
                                  age_group:
                                    type: string
                                  patient_id:
                                    type: integer
                                  arv_number:
                                    type: string
                                  birthdate:
                                    type: string
                                  order_date:
                                    type: string
                                  sample_drawn_date:
                                    type: string
                                  reason_for_test:
                                    type: string
                                  result_modifier:
                                    type: string
                                  result_value:
                                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/programs/1/reports/stock_card":
    get:
      summary: Retrieve Stock Card
      tags:
      - Pepfar Reports
      description: This shows Stock Card report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Stock Card Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/stock_card"
        '404':
          description: Stock Card Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/tx_rtt":
    get:
      summary: Pepfar TX RTT Report
      tags:
      - Pepfar Reports
      description: This shows Pepfar TX RTT report
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      - name: program_id
        in: query
        schema:
          type: integer
      - name: date
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Pepfar TX RTT Report found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/tx_rtt"
        '404':
          description: Pepfar TX RTT Report not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/pharmacy/stock_report":
    get:
      summary: Stock Report
      tags:
      - Pharmacy
      description: This gets the stock report
      security:
      - api_key: []
      responses:
        '200':
          description: Stock Report
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    product_code:
                      type: string
                    batch_numbers:
                      type: string
                    drug_name:
                      type: string
                    units:
                      type: string
                    closing_balance:
                      type: float
                    losses:
                      type: float
                    positive_adjustment:
                      type: float
                    negative_adjustment:
                      type: float
                    quantity_used:
                      type: float
                    quantity_received:
                      type: float
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/pharmacy/audit_trail":
    get:
      summary: Audit Trail
      tags:
      - Pharmacy
      description: This gets the audit trail
      security:
      - api_key: []
      parameters:
      - name: start_date
        in: query
        required: false
        schema:
          type: string
      - name: end_date
        in: query
        required: false
        schema:
          type: string
      - name: drug_id
        in: query
        required: false
        schema:
          type: integer
      - name: batch_number
        in: query
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Audit Trail
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    creation_date:
                      type: string
                    transaction_date:
                      type: string
                    transaction_type:
                      type: string
                    batch_number:
                      type: string
                    drug_id:
                      type: integer
                    batch_item_id:
                      type: integer
                    drug_name:
                      type: string
                    amount_committed_to_stock:
                      type: float
                    amount_dispensed_from_art:
                      type: float
                    username:
                      type: string
                    transaction_reason:
                      type: string
                    product_code:
                      type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/pharmacy/batches":
    post:
      summary: Add a batch
      tags:
      - Pharmacy
      description: This adds a batch item and can create a batch if does not exist
      security:
      - api_key: []
      parameters: []
      responses:
        '201':
          description: Batch created
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    batch_number:
                      type: string
                    creator:
                      type: integer
                    date_created:
                      type: string
                    date_changed:
                      type: string
                    voided:
                      type: boolean
                    voided_by:
                      type: integer
                    date_voided:
                      type: string
                    void_reason:
                      type: string
                    changed_by:
                      type: integer
                    location_id:
                      type: integer
                    items:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                          pharmacy_batch_id:
                            type: integer
                          drug_id:
                            type: integer
                          delivered_quantity:
                            type: float
                          current_quantity:
                            type: float
                          creator:
                            type: integer
                          date_created:
                            type: string
                          date_changed:
                            type: string
                          voided:
                            type: boolean
                          voided_by:
                            type: integer
                          date_voided:
                            type: string
                          void_reason:
                            type: string
                          changed_by:
                            type: integer
                          pack_size:
                            type: integer
                          barcode:
                            type: string
                          expiry_date:
                            type: string
                          product_code:
                            type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  batch_number:
                    type: string
                  location_id:
                    type: integer
                  items:
                    type: array
                    items:
                      type: object
                      properties:
                        pack_size:
                          type: integer
                        barcode:
                          type: string
                        drug_id:
                          type: integer
                        expiry_date:
                          type: string
                        quantity:
                          type: integer
                        delivery_date:
                          type: string
                        product_code:
                          type: string
        required: true
  "/api/v1/pharmacy/items/batch_update":
    post:
      summary: stock verification batch update
      tags:
      - Pharmacy
      description: This updates the stock verification batch items
      security:
      - api_key: []
      parameters: []
      responses:
        '204':
          description: successful
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                verification_date:
                  type: string
                  format: date
                  example: '2020-01-01'
                  required: true
                reason:
                  type: string
                  example: test
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                        required: true
                      current_quantity:
                        type: integer
                        example: 1
                        required: false
                      delivered_quantity:
                        type: integer
                        example: 1
                        required: false
                      pack_size:
                        type: integer
                        example: 1
                        required: false
                      expiry_date:
                        type: string
                        format: date
                        example: '2020-01-01'
                        required: false
                      delivery_date:
                        type: string
                        format: date
                        example: '2020-01-01'
                        required: false
                      reason:
                        type: string
                        example: test
                        required: true
        required: true
  "/api/v1/defaulter_list":
    get:
      summary: defaulter_list report
      tags:
      - Reports
      description: Reports Endpoints
      parameters:
      - name: start_date
        in: query
        format: date
        example: '2022-10-1'
        required: true
        schema:
          type: string
      - name: end_date
        in: query
        format: date
        example: '2022-12-1'
        required: true
        schema:
          type: string
      - name: pepfar
        in: query
        example: moh or pepfar
        required: true
        schema:
          type: string
      - name: program_id
        in: query
        example: 1
        required: true
        schema:
          type: integer
      security:
      - api_key: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    person_id:
                      type: integer
                    given_name:
                      type: string
                    family_name:
                      type: string
                    birthdate:
                      type: string
                    gender:
                      type: string
                    arv_number:
                      type: string
                    outcome:
                      type: string
                    defaulter_date:
                      type: string
                      format: date
                      example: '2019-01-01'
                    appointment_date:
                      type: string
                      format: date
                      example: '2019-01-01'
                    art_reason:
                      type: string
                    cell_number:
                      type: string
                    district:
                      type: string
                    ta:
                      type: string
                    village:
                      type: string
                    current_age:
                      type: string
                    landmark:
                      type: string
  "/api/v1/latest_regimen_dispensed":
    get:
      summary: latest_regimen_dispensed report
      tags:
      - Reports
      description: Reports Endpoints
      parameters:
      - name: start_date
        in: query
        format: date
        example: '2022-10-1'
        required: true
        schema:
          type: string
      - name: end_date
        in: query
        format: date
        example: '2022-12-1'
        required: true
        schema:
          type: string
      - name: date
        in: query
        format: date
        example: '2022-12-1'
        required: true
        schema:
          type: string
      - name: program_id
        in: query
        example: 1
        required: true
        schema:
          type: integer
      - name: rebuild_outcome
        in: query
        example: true
        required: true
        schema:
          type: boolean
      security:
      - api_key: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    patient_id:
                      type: array
                      items:
                        type: object
                        properties:
                          order_id:
                            type: object
                            properties:
                              name:
                                type: string
                              quantity:
                                type: integer
                              dispensation_date:
                                type: string
                                format: date
                                example: '2019-01-01'
                              identifier:
                                type: string
                              gender:
                                type: string
                              birthdate:
                                type: string
                                format: date
                                example: '2019-01-01'
                              drug_id:
                                type: integer
                              pack_sizes:
                                type: array
                                items:
                                  type: integer
                              vl_latest_order_date:
                                type: string
                                format: date
                                example: '2019-01-01'
                              vl_latest_result_date:
                                type: string
                                format: date
                                example: '2019-01-01'
                              vl_latest_result:
                                type: string
        '500':
          description: failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  "/api/v1/patients/{id}/tpt_status":
    get:
      summary: tpt_status report
      tags:
      - Reports
      description: Reports Endpoints
      parameters:
      - name: id
        in: path
        example: 1
        required: true
        schema:
          type: integer
      - name: date
        in: query
        format: date
        example: '2022-10-1'
        required: false
        schema:
          type: string
      security:
      - api_key: []
      responses:
        '200':
          description: successful
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/tpt_status"
  "/api/v1/rollback/merge_history":
    get:
      summary: Retrieve merge history
      tags:
      - Merge Rollback
      description: This shows the timeline of client merges
      security:
      - api_key: []
      parameters:
      - name: identifier
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Merge History found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    primary_id:
                      type: integer
                    secondary_id:
                      type: integer
                    merge_date:
                      type: string
                    merge_type:
                      type: string
                    primary_first_name:
                      type: string
                    primary_surname:
                      type: string
                    primary_gender:
                      type: string
                    primary_birthdate:
                      type: string
                    secondary_first_name:
                      type: string
                    secondary_surname:
                      type: string
                    secondary_gender:
                      type: string
                    secondary_birthdate:
                      type: string
        '404':
          description: Merge History not found
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
  "/api/v1/rollback/rollback_patient":
    post:
      summary: Rollback patient merge
      tags:
      - Merge Rollback
      security:
      - api_key: []
      parameters: []
      responses:
        '200':
          description: Patient Rolled back
          content:
            application/json:
              schema:
                type: object
                properties:
                  patient_id:
                    type: integer
        '404':
          description: There is no merge history of the patient
          content:
            application/json:
              schema:
                type: string
                properties:
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                patient_id:
                  type: integer
                program_id:
                  type: integer
              required:
              - patient_id
              - program_id
components:
  securitySchemes:
    api_key:
      type: apiKey
      name: Authorization
      in: header
  schemas:
    aetc_total_registered_report:
      type: object
      properties:
        patient_id:
          type: integer
          example: 1
        given_name:
          type: string
          example: John
        family_name:
          type: string
          example: Doe
        birthdate:
          type: string
          format: date-time
          example: '1990-01-01'
        gender:
          type: string
          example: M
        address:
          type: string
          example: Limbe
        ta:
          type: string
          example: Limbe
        registration_date:
          type: string
          format: date-time
          example: '2020-01-01'
        age_in_months:
          type: integer
          example: 1
    aetc_referral_report:
      type: object
      properties:
        location:
          type: string
          example: Limbe
        patients:
          type: array
          items:
            type: integer
    data_cleaning_supervision:
      type: object
      properties:
        data_cleaning_tool_id:
          type: integer
          example: 1
        data_cleaning_datetime:
          type: string
          format: date-time
          example: '2020-01-01'
        comments:
          type: string
          example: Comments
        date_created:
          type: string
          format: date-time
          example: '2020-01-01'
        date_changed:
          type: string
          format: date-time
          example: '2020-01-01'
        created_by:
          type: object
          properties:
            user_id:
              type: integer
              example: 1
            name:
              type: string
              example: John Doe
        updated_by:
          type: object
          properties:
            user_id:
              type: integer
              example: 1
            name:
              type: string
              example: John Doe
        all_supervisors:
          type: array
          items:
            type: string
    aetc_dissag_diagnosis:
      type: object
      properties:
        diagnosis:
          type: string
          example: Malaria
        "< 6 months":
          type: object
          properties:
            M:
              type: array
              items:
                type: integer
            F:
              type: array
              items:
                type: integer
            UNKNOWN:
              type: array
              items:
                type: integer
        6 months to < 5:
          type: object
          properties:
            M:
              type: array
              items:
                type: integer
            F:
              type: array
              items:
                type: integer
            UNKNOWN:
              type: array
              items:
                type: integer
        5 to 14:
          type: object
          properties:
            M:
              type: array
              items:
                type: integer
            F:
              type: array
              items:
                type: integer
            UNKNOWN:
              type: array
              items:
                type: integer
        "> 14":
          type: object
          properties:
            M:
              type: array
              items:
                type: integer
            F:
              type: array
              items:
                type: integer
            UNKNOWN:
              type: array
              items:
                type: integer
        total_by_gender:
          type: object
          properties:
            M:
              type: array
              items:
                type: integer
            F:
              type: array
              items:
                type: integer
            UNKNOWN:
              type: array
              items:
                type: integer
    aetc_specific_diagnosis:
      type: object
      properties:
        address:
          type: string
          example: Limbe
        patient_ids:
          type: array
          items:
            type: integer
    aetc_diagnosis:
      type: object
      properties:
        diagnosis:
          type: string
          example: Malaria
        data:
          type: array
          items:
            type: integer
    aetc_dashboard:
      type: object
      properties:
        name:
          type: string
          example: Social History
        me:
          type: integer
          example: 1
        facility:
          type: integer
          example: 1
        total:
          type: integer
          example: 2
    spine_dashboard:
      type: object
      properties:
        rows:
          type: array
          items:
            type: object
            properties:
              encounter:
                type: string
              female:
                type: integer
              male:
                type: integer
              me:
                type: integer
              facility:
                type: integer
        patient_summary_stats:
          type: object
          properties:
            top:
              type: object
              properties:
                registered_today:
                  type: integer
                returning_today:
                  type: integer
                referred_today:
                  type: integer
            down:
              type: object
              properties:
                registered:
                  type: object
                  properties:
                    registered:
                      "$ref": "#/components/schemas/spine_stat_data"
                    returning:
                      "$ref": "#/components/schemas/spine_stat_data"
                    referred:
                      "$ref": "#/components/schemas/spine_stat_data"
    spine_stat_data:
      type: object
      properties:
        '1':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '2':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '3':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '4':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '5':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '6':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '7':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '8':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '9':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '10':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '11':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '12':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
        '13':
          type: object
          properties:
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            count:
              type: integer
    hypertension_report:
      type: object
      properties:
        age_group:
          type: object
          properties:
            gender:
              type: object
              properties:
                screened:
                  type: array
                  items:
                    type: integer
                normal_reading:
                  type: array
                  items:
                    type: integer
                mild_reading:
                  type: array
                  items:
                    type: integer
                moderate_reading:
                  type: array
                  items:
                    type: integer
                severe_reading:
                  type: array
                  items:
                    type: integer
                hydrochlorothiazide_25mg:
                  type: array
                  items:
                    type: integer
                amlodipine_5mg:
                  type: array
                  items:
                    type: integer
                amlodipine_10mg:
                  type: array
                  items:
                    type: integer
                enalapril_5mg:
                  type: array
                  items:
                    type: integer
                enalapril_10mg:
                  type: array
                  items:
                    type: integer
                atenolol_50mg:
                  type: array
                  items:
                    type: integer
                atenolol_100mg:
                  type: array
                  items:
                    type: integer
                total_regimen:
                  type: array
                  items:
                    type: integer
    sc_curr:
      type: object
      properties:
        category:
          type: string
          description: Drug category or the drug name
        units:
          type: integer
          format: int32
          description: Number of bottles available
        quantity:
          type: integer
          format: int32
          description: Number of pills in a bottle
        granular_spec:
          type: object
          properties:
            drug:
              type: integer
              format: int32
              description: Number of bottles available
    stock_card:
      type: object
      properties:
        drug_id:
          type: integer
        drug_name:
          type: string
        opening_balance:
          type: number
        closing_balance:
          type: number
        dispensed_quantity:
          type: number
        pack_size:
          type: integer
    notification_alert:
      type: object
      properties:
        alert_id:
          type: integer
        text:
          type: string
        satisfied_by_any:
          type: boolean
        alert_read:
          type: boolean
        date_to_expire:
          type: string
          format: date-time
        creator:
          type: integer
        date_created:
          type: string
          format: date-time
        changed_by:
          type: integer
        date_changed:
          type: string
          format: date-time
        uuid:
          type: string
    lims_electronic_result:
      type: object
      properties:
        date_ordered:
          type: string
          format: date-time
        given_name:
          type: string
        family_name:
          type: string
        arv_number:
          type: string
        patient_id:
          type: integer
        date_received:
          type: string
          format: date-time
        accession_number:
          type: string
        result:
          type: string
        test_name:
          type: string
        result_delivery_mode:
          type: string
        status:
          type: string
    vl_collection:
      type: object
      properties:
        patient_id:
          type: integer
        given_name:
          type: string
        family_name:
          type: string
        gender:
          type: string
        birthdate:
          type: string
        identifier:
          type: string
        order_date:
          type: string
          format: date
    gender:
      type: string
      enum:
      - M
      - F
      - Unknown
    age_group:
      type: string
      enum:
      - Unknown
      - "<1 year"
      - 1-4 years
      - 5-9 years
      - 10-14 years
      - 15-19 years
      - 20-24 years
      - 25-29 years
      - 30-34 years
      - 35-39 years
      - 40-44 years
      - 45-49 years
      - 50-54 years
      - 55-59 years
      - 60-64 years
      - 65-69 years
      - 70-74 years
      - 75-79 years
      - 80-84 years
      - 85-89 years
      - 90 plus years
    hts_hiv_results:
      type: object
      properties:
        neg:
          type: array
          items:
            type: integer
        pos:
          type: array
          items:
            type: integer
    hts_recency_results:
      type: object
      properties:
        recent:
          type: array
          items:
            type: integer
        long_term:
          type: array
          items:
            type: integer
    hts_index_common:
      type: object
      properties:
        new_positives:
          type: array
          items:
            type: integer
        new_negatives:
          type: array
          items:
            type: integer
        known_positives:
          type: array
          items:
            type: integer
        documented_negatives:
          type: array
          items:
            type: integer
    hts_tst_community:
      type: object
      properties:
        gender:
          "$ref": "#/components/schemas/gender"
        age_group:
          "$ref": "#/components/schemas/age_group"
        index_comm:
          "$ref": "#/components/schemas/hts_hiv_results"
        mobile_comm:
          "$ref": "#/components/schemas/hts_hiv_results"
        sns_comm:
          "$ref": "#/components/schemas/hts_hiv_results"
        vct_comm:
          "$ref": "#/components/schemas/hts_hiv_results"
        other_comm_tp:
          "$ref": "#/components/schemas/hts_hiv_results"
    hts_index:
      type: object
      properties:
        gender:
          "$ref": "#/components/schemas/gender"
        age_group:
          "$ref": "#/components/schemas/age_group"
        index_clients:
          type: array
          items:
            type: integer
        offered_clients:
          type: array
          items:
            type: integer
        contacted_elicited:
          type: array
          items:
            type: object
            properties:
              patient:
                type: integer
              contacts:
                type: integer
        facility:
          "$ref": "#/components/schemas/hts_index_common"
        community:
          "$ref": "#/components/schemas/hts_index_common"
    hts_recent_community:
      type: object
      properties:
        gender:
          "$ref": "#/components/schemas/gender"
        age_group:
          "$ref": "#/components/schemas/age_group"
        index:
          "$ref": "#/components/schemas/hts_recency_results"
        mobile_comm:
          "$ref": "#/components/schemas/hts_recency_results"
        sns_comm:
          "$ref": "#/components/schemas/hts_recency_results"
        vct_comm:
          "$ref": "#/components/schemas/hts_recency_results"
        other_comm_tp:
          "$ref": "#/components/schemas/hts_recency_results"
    discrepancy_report:
      type: array
      items:
        type: object
        properties:
          drug_id:
            type: integer
          name:
            type: string
          short_name:
            type: string
          verification_date:
            type: string
            format: date-time
          verification_reason:
            type: string
          difference:
            type: integer
          current_quantity:
            type: integer
          variance_reason:
            type: string
    tpt_status:
      type: object
      properties:
        tpt:
          type: string
          example: INH 300 / RFP 300 (3HP)
        completed:
          type: boolean
          example: false
        tb_treatment:
          type: boolean
          example: false
        tpt_init_date:
          type: string
          format: date-time
          example: '2023-01-01'
        tpt_complete_date:
          type: string
          format: date-time
          example: '2023-01-01'
        tpt_end_date:
          type: string
          format: date-time
          example: '2023-01-01'
        eligible:
          type: object
          properties:
            3HP:
              type: boolean
              example: false
            6H:
              type: boolean
              example: false
    tx_rtt:
      type: object
      properties:
        age_group:
          type: string
        gender:
          type: string
        cd4_less_than_200:
          type: array
          items:
            type: integer
        cd4_greater_than_or_equal_to_200:
          type: array
          items:
            type: integer
        unknown_cd4_count:
          type: array
          items:
            type: integer
        not_eligible_for_cd4:
          type: array
          items:
            type: integer
        returned_less_than_3_months:
          type: array
          items:
            type: integer
        returned_greater_than_3_months_and_less_than_6_months:
          type: array
          items:
            type: integer
        returned_greater_than_or_equal_to_6_months:
          type: array
          items:
            type: integer
    different_pregnancy_value_on_same_date:
      type: object
      properties:
        patient_id:
          type: integer
        given_name:
          type: string
        family_name:
          type: string
        visit_date:
          type: string
          format: date-time
        gender:
          type: string
        birthdate:
          type: string
          format: date-time
        arv_number:
          type: string
        national_id:
          type: string
security:
- api_key: []
servers:
- url: http://{defaultHost}
  variables:
    defaultHost:
      default: localhost:3000
