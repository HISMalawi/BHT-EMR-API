# CODE DOCUMENTATION: Total Registered Report
## Summary
This a class called 'TotalRegisteredReport' that is responsible for building a report of total registered patients. It takes in a start date, end date, and an optional age group as inputs. The report is generated by executing a SQL query that retrieves patient information from the database based on the specified criteria.

## Example Usage
```ruby
report = TotalRegisteredReport.new(start_date: '2021-01-01', end_date: '2021-12-31', age_group: '1 to < 5')
report.fetch_report
```

## Code Analysis
### Inputs
- `start_date`: A string representing the start date of the report period.
- `end_date`: A string representing the end date of the report period.
- `age_group`: An optional string representing the age group of the patients to include in the report. It can be one of the predefined age groups or 'all' to include all age groups.
___
### Flow
1. The class is initialized with the start date, end date, and age group inputs.
2. The start and end dates are formatted and stored as instance variables.
3. The age group input is parsed from JSON format and stored as an instance variable.
4. The `fetch_report` method is called, which executes a SQL query to retrieve the total registered patients based on the specified criteria.
5. The SQL query joins multiple tables and applies various conditions to filter the patient data.
6. The result of the SQL query is returned as the output of the `fetch_report` method.
___
### Outputs
The output of the `fetch_report` method is a result set containing the following patient information:
- `patient_id`: The ID of the patient.
- `given_name`: The given name of the patient.
- `family_name`: The family name of the patient.
- `birthdate`: The birthdate of the patient.
- `gender`: The gender of the patient.
- `address`: The city/village address of the patient.
- `ta`: The county/district of the patient.
- `registration_date`: The date of registration for the patient.
- `age_in_months`: The age of the patient in months at the end date of the report period.
___
